<html>
    <head>
    <script>

        const handleFormSubmit = event => {
            

            // Stop the form from submitting since weâ€™re handling that with AJAX.
            event.preventDefault();    

            const data = {};

            const dataContainer = document.getElementsByID("results");
            dataContainer.textContent = JSON.stringify(data, null,"  ");
        };
            

        const form = document.getElementsByID('userURLS');
        //event listener to execute handleFormSubmit
        form.addEventListener('submit', handleFormSubmit);
       

        



        function loadDoc() {
            var xmlhttp = new XMLHttpRequest();
            var url = "http://localhost:8080/output.json";

            xmlhttp.onreadystatechange = function() {
                if (this.readyState == 4 && this.status == 200) {
                    var jobArr = JSON.parse(this.responseText);
                    var div = document.getElementById("demo");

                    for (let i=0; i<jobArr.length; i++) {
                        var newJob = document.createElement("div");
                        var jobNode = document.createTextNode(JSON.stringify(jobArr[i]));
                        newJob.appendChild(jobNode);

                        div.appendChild(newJob);
                    }    
                }
            };
            xmlhttp.open("GET", url, true);
            xmlhttp.send();
                    
        };
    
    </script>        
    </head>

    <body onload="loadDoc()">
        <h1>Pick 5 Dream Jobs and we'll find the most desired skills for them!</h1>
        <div>
            <form  id="userURLS" enctype="application/json">
                <label>Job Url 1</label><input name="url" type="text" placeholder="insert job URL here from indeed.co.uk" >
            </br>
                <label>Job Url 2</label><input name="url" type="text" placeholder="insert job URL here from indeed.co.uk">
            </br>
                <label>Job Url 3</label><input name="url" type="text" placeholder="insert job URL here from indeed.co.uk">
            </br>
                <label>Job Url 4</label><input name="url" type="text" placeholder="insert job URL here from indeed.co.uk">
            </br>
                <label>Job Url 5</label><input name="url" type="text" placeholder="insert job URL here from indeed.co.uk">
                <input type="submit" value="submit" onclick="FormDataToJSON(form)">
            </form>
        </div>

        <div id="results">
            <h1>JOB Titles</h1>

        </div>
        <div id="demo">

        </div>
    </body>
</html>